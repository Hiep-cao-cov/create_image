<!DOCTYPE html>
<html>
<head>
    <title>AI Image Generator</title>
    <style>
        body { font-family: Arial; background: #f4f6f8; padding: 30px; }
        .container { max-width: 900px; margin: auto; }
        textarea { width: 100%; height: 150px; padding: 12px; border-radius: 6px; border: 1px solid #ccc; }
        button { padding: 12px 24px; margin-top: 10px; background: #4CAF50; color: white; border: none; border-radius: 6px; cursor: pointer; }
        .error { color: red; }
        .gallery { display: flex; gap: 20px; flex-wrap: wrap; margin-top: 30px; }
        .gallery div { text-align: center; }
        .gallery img { width: 280px; border-radius: 6px; box-shadow: 0 0 8px rgba(0,0,0,0.1); }
    </style>
</head>
<body>
<div class="container">
    <h1>Welcome, {{ username }}</h1>
    {% if attempts > 0 %}
        <p><strong>Attempts remaining: {{ attempts }}</strong></p>
        <p>Your prompt must include one of these: <strong>image, draw, picture</strong></p>
        <form method="POST">
            <textarea name="prompt" placeholder="Example: draw a robot on Mars" required></textarea>
            <button type="submit">Generate Image</button>
        </form>
    {% else %}
        <p>âœ… You have used all 3 prompts.</p>
    {% endif %}
    {% if error %}<p class="error">{{ error }}</p>{% endif %}
    {% if images %}
        <h2>Your Generated Images</h2>
        <form method="POST" action="{{ url_for('submit') }}">
            <div class="gallery">
                {% for image in images %}
                    <div>
                        <input type="radio" name="selected_image" value="{{ loop.index0 }}" required>
                        <img src="{{ image }}">
                    </div>
                {% endfor %}
            </div>
            <button type="submit">Submit Final Image</button>
        </form>
    {% endif %}
</div>
</body>
</html>
